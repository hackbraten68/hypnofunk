<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hypnofunk.de</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script
      defer
      src="https://unpkg.com/@alpinejs/ui@3.13.1-beta.0/dist/cdn.min.js"
    ></script>
    <script
      defer
      src="https://unpkg.com/@alpinejs/focus@3.13.1/dist/cdn.min.js"
    ></script>
    <script
      defer
      src="https://unpkg.com/alpinejs@3.13.1/dist/cdn.min.js"
    ></script>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>

    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="styles.css" />
  </head>

  <body x-data="{ isMobile: window.innerWidth <= 768 }">
    <div x-cloak class="header-background navbar__mobile">
            
      <!-- MOBILE NAVBAR -->
      <div x-show="isMobile" class="">
        <nav x-data="{ isActive: false }">
          <div class="navbar__mobile-container">
            <a href="#" class="flex items-center">
              <span class="navbar__mobile-title">Hypnofunk.de</span>
            </a>
          </div>
        </nav>
      </div>

      <!-- DESKTOP NAVBAR -->
      <div x-show="!isMobile">
        <nav class="navbar__desktop">
          <div class="navbar__desktop-container">
            <a href="#" class="flex items-center space-x-3 rtl:space-x-reverse">
              <span class="navbar__desktop-title">Hypnofunk</span>
            </a>
          
            <div class="navbar__desktop-social-media">
              <div class="navbar__desktop-social-wrapper">
                  <a href="https://t.me/hypnofunk">
                    <i class="fa-brands fa-telegram"></i>
                  </a>
                  <a href="https://m.youtube.com/@Hypnofunken">
                    <i class="fa-brands fa-youtube"></i>
                  </a>
                  <a href="https://www.tiktok.com/@hypnofunk">
                    <i class="fa-brands fa-tiktok"></i>
                  </a>
              </div>
            </div>
          </div>
        </nav>
      </div>
    </div>

    <!-- MAIN CONTENT -->
    <div
      x-data="videoGallery()"
      x-init="sortVideos"
      class="body-background body-width"
    >
      <!-- FEATURE TEASER -->
      <section class="feature-teaser__container">
        <div class="feature-teaser__info">
          <h3>Hypnofunk</h3>
          <div class="feature-teaser__subheading">
            <p>
              Solange der Hypnosefunk sendet und keiner die Techniken der
              Manipulation und Propaganda kennt, wird jeder denken, dass die
              L√ºge die Wahrheit ist.
            </p>
          </div>
        </div>
      </section>

      <!-- TIMELINE & GALLERY DESKTOP -->
      <div x-show="!isMobile">
          <section id="gallery" class="mb-20 md:mx-3">
            <div
              id="gallery"
              class="flex flex-col md:grid md:grid-cols-3 md:gap-4"
              x-html="galerieHTML"
            >
            </div>
          </section>
      </div>

      <!-- MINIMAL TIMELINE MOBILE -->
      <div x-show="isMobile">
        <section class="mobile-timeline__container mx-4">
          <ol id="gallery" x-html="minimalTimelineGallery"></ol>
        </section>
      </div>

      <div 
        x-data="imprintModal()"
        x-init="initModal()"
        >
        <footer>
          <div class="footer__container">
            <span
              >¬© <span id="currentYear"></span>
              <a href="https://hypnofunk.de/" class="hover:underline">Hypnofunk</a
              >. All Rights Reserved.
            </span>
            <span>Coded with ü§ç</span>
            <ul>
              <li>
                <a href="#" x-on:click.prevent="open = true" class="hover:underline me-4 md:me-6 font-normal">Impressum</a>
              </li>
            </ul>
          </div>
        </footer>
        <div id="modalContainer"></div>
      </div>
    </div>
    
    <!-- COOKIE MESSAGE -->
    <div class="cookies" id="cookies-banner">
      <div id="cookies-text">
        üç™ Cookie Hinweis: Hypnofunk.de sammelt keine Cookies üç™
      </div>
    </div>
  </body>
</html>

<script>
  function getCurrentYear() {
    const date = new Date();
    return date.getFullYear();
  }

  // COOKIE MESSAGE
  document.addEventListener('DOMContentLoaded', () => {
    const banner = document.querySelector('.cookies');

    function showBanner() {
      console.log("Cookie Banner init")
      banner.style.display = 'block';
      setTimeout(() => {
        banner.style.opacity = '1';
      }, 100);
      
      setTimeout(() => {
        banner.style.opacity = '0';
        setTimeout(() => {
          banner.style.display = 'none';
        }, 500);
      }, 10000); 
    }
    setTimeout(showBanner, 100);
  });


  document.addEventListener("DOMContentLoaded", function () {
    const yearSpan = document.getElementById("currentYear");
    yearSpan.textContent = getCurrentYear();
  });

  document.addEventListener('scroll', function() {
    const navbarMobile = document.querySelector('.navbar__mobile-container');
    const navbarDesktop = document.querySelector('.navbar__desktop');
    if (window.scrollY > 0) {
      navbarMobile.classList.add('scrolled');
      navbarDesktop.classList.add('scrolled');
    } else {
      navbarMobile.classList.remove('scrolled');
      navbarDesktop.classList.remove('scrolled');
    }
  });

  function loadVideo(container) {
    const img = container.querySelector("img");
    const video = container.querySelector("video");

    img.style.display = "none";
    video.style.display = "block";
    video.play();
  }

  function videoGallery() {
    return {
      videos: [
        {
          title: "Nudging",
          year: "2024",
          month: "April",
          day: "8",
          desc: "Nudging ist eine Strategie, mit der Menschen dazu bewegt werden, sich f√ºr eine bestimmte Verhaltensweise zu entscheiden, ohne dass sie es bemerken.",
          src: "./vids/Nudging.mp4",
          poster: "./vids/Nudging.png",
        },
        {
          title: "Gaslighting",
          year: "2024",
          month: "April",
          day: "15",
          desc: "Gaslighting ist eine Form von psychischer Gewalt, bei der die Opfer durch L√ºgen, Leugnen und Einsch√ºchterung manipuliert werden.",
          src: "./vids/Gaslighting.mp4",
          poster: "./vids/Gaslighting.png",
        },
        {
          title: "Verschw√∂rungstheorien",
          year: "2024",
          month: "April",
          day: "22",
          desc: "Als Verschw√∂rungstheorien werden heutzutage Ansichten bezeichnet, die mit einer Verschw√∂rung im eigentlichen Sinn nichts zu tun haben. Man benutzt das Wort als Kampfbegriff, um unliebsame Meinungen in ein schlechtes Licht zu r√ºcken.",
          src: "./vids/Verschwoerungstheorien.mp4",
          poster: "./vids/Verschwoerungstheorien.png",
        },
        {
          title: "Framing",
          year: "2024",
          month: "Mai",
          day: "2",
          desc: "Framing ist das Einrahmen eines Sachverhaltes, der im Sinne der eigenen Interessen interpretiert und dargestellt werden soll.",
          src: "./vids/Framing.mp4",
          poster: "./vids/Framing.png",
        },
        {
          title: 'Gustave Le Bon - "Psychologie der Massen"',
          year: "2024",
          month: "Mai",
          day: "11",
          desc: "Eine unverzichtbare Lekt√ºre in diesen Zeiten. Es wird viel dar√ºber geredet, man sollte sie aber auch unbedingt selbst lesen, um den Wahnsinn, der uns umgibt, besser zu verstehen.<br><br>Das Buch erschien 1895 und hat an Aktualit√§t nicht verloren.",
          src: "./vids/GustaveLeBon.mp4",
          poster: "./vids/GustaveLeBon.png",
        },
        {
          title: "Kriegspropaganda",
          year: "2024",
          month: "Juli",
          day: "29",
          desc: "Propaganda und Desinformation spielen in Kriegszeiten eine gro√üe Rolle. Um Unterst√ºtzung f√ºr einen Krieg zu bekommen oder auch Feindbilder zu generieren, ist die Manipulation der √∂ffentlichen Meinung entscheidend.",
          src: "./vids/Kriegspropaganda.mp4",
          poster: "./vids/Kriegspropaganda.jpg",
        },
      ],

      monatZuNummer: { Januar: 0, Februar: 1, M√§rz: 2, April: 3, Mai: 4, Juni: 5, Juli: 6, August: 7, September: 8, Oktober: 9, November: 10, Dezember: 11 },

      sortVideos: function () {
        this.videos.sort((a, b) => {
          const monthA = this.monatZuNummer[a.month];
          const monthB = this.monatZuNummer[b.month];

          const yearA = parseInt(a.year, 10);
          const yearB = parseInt(b.year, 10);
          const dayA = parseInt(a.day || 1, 10);
          const dayB = parseInt(b.day || 1, 10);

          const timestampA = new Date(yearA, monthA, dayA).getTime();
          const timestampB = new Date(yearB, monthB, dayB).getTime();

          return timestampB - timestampA;
        });
      },

      minimalTimelineGallery: function () {
        const aspectRatio = 16 / 9;
        const height = 800;
        const width = height * aspectRatio;

        return this.videos
          .map(function (video) {
            return `              
                        <li>
                            <div class="mobile-timeline__card">
                                <span x-on:click="open = true">
                                    <video controls class="rounded-md cursor-pointer" width="${width}" height="${height}" poster="${video.poster}">
                                        <source src="${video.src}" type="video/mp4">
                                        <p>Ihr Browser unterst√ºtzt das Videoformat nicht.</p>
                                    </video>
                                </span>
                                <div class="mobile-timeline__text">
                                    <time>${video.day}. ${video.month} ${video.year}</time>
                                    <a href="#">
                                        <h5 class="">${video.title}</h5>
                                    </a>
                                    <p class="mb-3 font-normal text-gray-700 dark:text-[#9fe870]">${video.desc}</p>
                                </div>
                            </div>    
                        </li>`;
          })
          .join("");
      },

      galerieHTML: function () {
        const aspectRatio = 16 / 9;
        const height = 800;
        const width = height * aspectRatio;

        return this.videos
          .map(function (video) {
            return `
                      <div class="desktop-gallery__card">
                          <div class="desktop-gallery__container">
                              <div class="desktop-gallery__video-container" onclick="loadVideo(this)">
                                  <img src="${video.poster}" alt="Video Thumbnail" class="rounded-md cursor-pointer" width="${width}" height="${height}">
                                  <video controls class="rounded-md" width="${width}" height="${height}" style="display:none;">
                                      <source src="${video.src}" type="video/mp4">
                                      <p>Ihr Browser unterst√ºtzt das Videoformat nicht.</p>
                                  </video>
                              </div>
                              <div class="desktop-gallery__body">
                                  <time class="desktop-gallery__body-time">${video.day}. ${video.month} ${video.year}</time>
                                      <p class="desktop-gallery__body-headline">${video.title}</p>
                                  <p class="desktop-gallery__body-text">${video.desc}</p>
                              </div>
                          </div>
                      </div>`;
            })
          .join("");
      },
    };
  }

  function imprintModal() {
    return {
      open: false,
      imprint: [
        {
          firstName: 'Max',
          lastName: 'Mustermann',
          street: 'Bretanoweg 3',
          zip: '69126',
          city: 'Heidelberg',
          tel: '06221/123456789',
          contact: 'kontakt@hypnofunk.de',
          url: 'www.hypnofunk.de',
          text: 'Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.'
        }
      ],

      imprintHTML: function () {
        return this.imprint
          .map(function (entry) {
            return `
              <div x-show="open" 
                style="display: none"
                x-on:keydown.escape.prevent.stop="open = false"
                role="dialog" 
                aria-modal="true" 
                x-id="['modal-title']" 
                :aria-labelledby="$id('modal-title')"
                class="fixed inset-0 imprint-modal__container overflow-y-auto">
              <!-- Overlay -->
              <div x-show="open" x-transition.opacity class="fixed inset-0 bg-black bg-opacity-50"></div>
              
              <!-- Panel -->
              <div x-show="open" x-transition
                  x-on:click="open = false"
                  class="relative flex min-h-screen items-center justify-center p-4">
                <div x-on:click.stop
                    x-trap.noscroll.inert="open"
                    class="relative w-full max-w-2xl overflow-y-auto rounded-xl bg-white p-12 shadow-lg">
                  <!-- Title -->
                  <h2 class="text-2xl font-bold" :id="$id('modal-title')">Impressum | hypnofunk.de</h2>
                  
                  <!-- Content -->
                  <div>
                    <p class="mt-2 text-gray-600"><span class="font-bold">Name: </span>${entry.firstName} ${entry.lastName}</p>
                    <p class="mt-2 text-gray-600"><span class="font-bold">Adresse: </span>${entry.street}, ${entry.zip} ${entry.city}</p>
                    <p class="mt-2 text-gray-600"><span class="font-bold">Telefon: </span>${entry.tel}</p>
                  <p class="mt-2 text-gray-600"><span class="font-bold">E-Mail: </span><a href="mailto:${entry.contact}" class="text-blue-600 hover:underline">${entry.contact}</a></p>
                  <p class="mt-2 text-gray-600"><span class="font-bold">Website: </span><a href="http://${entry.url}" target="_blank" class="text-blue-600 hover:underline">${entry.url}</a></p>
                    <p class="mt-2 text-gray-600">${entry.text}</p>
                  </div>
                  
                  <!-- Buttons -->
                  <div class="mt-4 md:mt-8">
                    <button type="button" x-on:click="open = false" class="rounded-md border border-gray-200 bg-white px-5 py-2.5">
                      Schlie√üen
                    </button>
                  </div>
                </div>
              </div>
            </div>`;
          })
        .join("");
    },

      // Funktion zur Initialisierung und Einf√ºgen ins DOM
      initModal: function() {
        const modalContainer = document.getElementById('modalContainer');
        modalContainer.innerHTML = this.imprintHTML();
      }
    }
  }


  document.addEventListener('alpine:init', () => {
    Alpine.data('imprintModal', imprintModal);
    Alpine.data('videoGallery', videoGallery);
  });


  // Checks which Viewport
  window.addEventListener("resize", () => {
    // Monitors the screen width and updates the 'isMobile' status accordingly
    if (window.innerWidth <= 768) {
      Alpine.store("isMobile", true);
    } else {
      Alpine.store("isMobile", false);
    }
  });
</script>

<script defer src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" integrity="sha384-rOA1PnstxnOBLzCLMcre8ybwbTmemjzdNlILg8O7z1lUkLXozs4DHonlDtnE7fpc" crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/6aaba4475b.js" crossorigin="anonymous"></script>
